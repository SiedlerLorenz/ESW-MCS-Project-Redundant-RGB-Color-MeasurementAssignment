<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Redundant RGB Color Measurement: Cpu2_Main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Redundant RGB Color Measurement
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Cpu2_Main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
  <h2>Flowchart</h2>
  <img src="core2.png"/>
  <br>

<p>Core2 uses i2c to repeately read color values from an apds9960 sensor. After a successful read the color values are transmitted to core0 via shared memory given that the shared memory is currenty not accquired by core0.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;I2c/I2c/IfxI2c_I2c.h&gt;</code><br />
<code>#include &lt;IfxGtm_Tom_Timer.h&gt;</code><br />
<code>#include &lt;IfxGtm_reg.h&gt;</code><br />
<code>#include &lt;Qspi/SpiSlave/IfxQspi_SpiSlave.h&gt;</code><br />
<code>#include &lt;<a class="el" href="apds9960_8h_source.html">apds9960.h</a>&gt;</code><br />
<code>#include &lt;main.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;SysSe/Bsp/Bsp.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a442eca6e635d4bd239fecfe80432799b"><td class="memItemLeft" align="right" valign="top"><a id="a442eca6e635d4bd239fecfe80432799b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UPDATE_RATE_MS</b>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a442eca6e635d4bd239fecfe80432799b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50d2d84563cf5ce031d3e472a2c5d8f"><td class="memItemLeft" align="right" valign="top"><a id="af50d2d84563cf5ce031d3e472a2c5d8f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MS_SCALE</b>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:af50d2d84563cf5ce031d3e472a2c5d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f9f5cc546b1896703fe63289b4fd3d"><td class="memItemLeft" align="right" valign="top"><a id="a97f9f5cc546b1896703fe63289b4fd3d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_BUFFER_SIZE</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a97f9f5cc546b1896703fe63289b4fd3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac93d8369b99ca412dcbcb0c73ce05534"><td class="memItemLeft" align="right" valign="top"><a id="ac93d8369b99ca412dcbcb0c73ce05534"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_cpu2___main_8c.html#ac93d8369b99ca412dcbcb0c73ce05534">core2_main</a> (void)</td></tr>
<tr class="memdesc:ac93d8369b99ca412dcbcb0c73ce05534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main CPU2 entry point after CPU0 boot-up. <br /></td></tr>
<tr class="separator:ac93d8369b99ca412dcbcb0c73ce05534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae9f3f1bf5da9c7cb9ca261d01d09eefb"><td class="memItemLeft" align="right" valign="top">IfxI2c_I2c&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_cpu2___main_8c.html#ae9f3f1bf5da9c7cb9ca261d01d09eefb">g_i2c_handle</a></td></tr>
<tr class="memdesc:ae9f3f1bf5da9c7cb9ca261d01d09eefb"><td class="mdescLeft">&#160;</td><td class="mdescRight">for i2c  <a href="_cpu2___main_8c.html#ae9f3f1bf5da9c7cb9ca261d01d09eefb">More...</a><br /></td></tr>
<tr class="separator:ae9f3f1bf5da9c7cb9ca261d01d09eefb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c253906e139a9c7b39cf5ac4767362"><td class="memItemLeft" align="right" valign="top"><a id="a47c253906e139a9c7b39cf5ac4767362"></a>
IfxCpu_mutexLock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_cpu2___main_8c.html#a47c253906e139a9c7b39cf5ac4767362">g_apds9960_rgbc_shared_data_mtx</a></td></tr>
<tr class="memdesc:a47c253906e139a9c7b39cf5ac4767362"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore to protect access to the shared rgbc color data buffer. <br /></td></tr>
<tr class="separator:a47c253906e139a9c7b39cf5ac4767362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8701eddc2678010b4b49e38989fd12"><td class="memItemLeft" align="right" valign="top"><a id="a6f8701eddc2678010b4b49e38989fd12"></a>
<a class="el" href="structapds9960__shared__data__t.html">apds9960_shared_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_cpu2___main_8c.html#a6f8701eddc2678010b4b49e38989fd12">g_apds9960_shared_data</a></td></tr>
<tr class="memdesc:a6f8701eddc2678010b4b49e38989fd12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared memory to exchange rgbc color data between core0 and core2. <br /></td></tr>
<tr class="separator:a6f8701eddc2678010b4b49e38989fd12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core2 uses i2c to repeately read color values from an apds9960 sensor. After a successful read the color values are transmitted to core0 via shared memory given that the shared memory is currenty not accquired by core0. </p>
<dl class="section date"><dt>Date</dt><dd>01.11.2020 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>v0.1 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Letofsky Herwig</dd></dl>
<p>If no sensor is connected at start up the core will wait till a device is connected to the bus and then proceed with the above behaviour. If the sensor is disconnected from the bus during execution the programm will notice an report to core 0 via shared memory. </p>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="ae9f3f1bf5da9c7cb9ca261d01d09eefb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9f3f1bf5da9c7cb9ca261d01d09eefb">&#9670;&nbsp;</a></span>g_i2c_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IfxI2c_I2c g_i2c_handle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>for i2c </p>
<p>for i2c </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
